В Entity Framework є 3 основні підходи для завантаження пов'язаних даних: eager loading, lazy loading, explicit loading.
### Eager loading
**Eager loading** полягає в тому, що пов'язані дані завантажуються разом з основним запитом до бази даних. Це означає, що EF виконує один запит, який отримує одразу всі необхідні дані.
Це те що я завжди юзав, типу : `context.Users.Include(x => x.Person).ToListAsync()`.
**Плюсом** є те що використовується 1 запит до БД, тобто нагрузка на БД мінімальна, **АЛЕ** може привести до отримання зайвих данів, не настільки гнучко у роботі.
### Lazy loading
Lazy loading полягає в тому, що пов'язані дані завантажуються лише тоді, коли до них відбувається звернення в коді. EF автоматично генерує додатковий запит до бази даних при першій спробі доступу до навігаційного властивості.
Щоб це застосувати необхідно встановити пакет `Microsoft.EntityFrameworkCore.Proxies` та налаштувати його в контексті бази даних. Після цього, при зверненні до навігаційної властивості, EF автоматично завантажить пов'язані дані.
	**Переваги:** Завантажуються тільки необхідні дані, що може зменшити обсяг переданих даних.
	**Недоліки:** Може призвести до проблеми N+1, коли для отримання пов'язаних даних для N сутностей виконується N+1 запитів до бази даних, що значно знижує продуктивність.

Конфігурація (перед тим встановити пакет `Microsoft.EntityFrameworkCore.Proxies`):
```
protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder) {
	optionsBuilder 
				.UseLazyLoadingProxies() // Включаємо Lazy Loading
				.UseSqlServer(@"...");
}
```

**Проблема N+1:** Lazy Loading може призвести до проблеми N+1, коли для отримання пов'язаних даних для N сутностей виконується N+1 запитів до бази даних (1 для отримання основних сутностей та N для отримання пов'язаних). Це може значно знизити продуктивність, особливо при великій кількості даних. Тому, якщо вам потрібно завантажити багато пов'язаних даних, краще використовувати Eager Loading (з `Include()`).
### Explicit loading
Дозволяє явно завантажувати пов'язані дані в будь-який момент часу. Це дає більший контроль над процесом завантаження даних.
Для явного завантаження використовуються методи `Collection.Load()` для колекцій та `Reference.Load()` для одиничних сутностей. 
Наприклад:
```
var blog = context.Blogs.Find(1);
context.Entry(blog).Collection(b => b.Posts).Load();
```

#### Порівняння

| Характеристика     | Eager Loading                                     | Lazy Loading                                    | Explicit Loading        |
| ------------------ | ------------------------------------------------- | ----------------------------------------------- | ----------------------- |
| Кількість запитів  | 1                                                 | 1 + N (проблема N+1)                            | Залежить від потреб     |
| Завантаження даних | Разом з основним запитом                          | При першому зверненні                           | Явно в коді             |
| Продуктивність     | Висока (за умови потреби у всіх пов'язаних даних) | Низька (при великій кількості пов'язаних даних) | Залежить від реалізації |
| Контроль           | Менший                                            | Автоматичний                                    | Високий                 |
